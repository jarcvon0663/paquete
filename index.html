<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Venta de videojuegos retro para celular y computador. Encuentra tus juegos favoritos en Videojuegosretro.">
    <meta name="keywords" content="videojuegos, retro, celular, computador, juegos, venta">
    <meta name="author" content="Arturo Rios Castaño">

    <title>Iniciar Sesión - Videojuegos Retro</title>

    <link rel="icon" type="image/x-icon" href="./img/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        integrity="sha384-MFd4e0QuVc8R5BCVytIShyLrs1F6NXrhiIiIh2rvJpcR+n4P6aY+kSPhR3IHDUCP" crossorigin="anonymous">

    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZR4WQB7GBD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-ZR4WQB7GBD');
    </script>
</head>

<body>

    <div class="wrapper">
        <header class="header-mobile">
            <img class="logo-img" src="./img/logo.png" alt="Logo de Videojuegos Retro">
            <h1 class="logo">Videojuegosretro</h1>
            <img class="logo-img" src="./img/logo.png" alt="Logo de Videojuegos Retro">
        </header>
        <main>
            <h2 class="titulo-principal">Iniciar Sesión</h2>
            <div class="login-container">
                <form id="login-form">
                    <label for="username">Usuario:</label>
                    <input type="text" id="username" name="username" required>
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" name="password" required>
                    <button type="submit">Iniciar Sesión</button>
                </form>
                <p id="login-error" class="login-error"></p>
            </div>
        </main>
    </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js" async></script>
    <script>
        async function fetchUsers() {
            const response = await fetch('./js/users.json');
            return await response.json();
        }
    
        document.getElementById('login-form').addEventListener('submit', async function (event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const users = await fetchUsers();
            
            const user = users.find(user => user.username === username && user.password === password);
            if (user) {
                localStorage.setItem('authenticated', 'true');
                window.location.href = './android/android.html';
            } else {
                document.getElementById('login-error').textContent = 'Usuario o contraseña incorrectos.';
            }
        });
    </script>
</body>

</html>
